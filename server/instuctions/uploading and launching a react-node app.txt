uploading and deploying a react/nodejs app

	info
	rss.key: aws-ec2-01.pem
	ip: 100.26.97.226
	directories of note:
		/var/www/aws-ec2-github/server/ - the index.js file is located here.
		/etc/nginx/nginx.conf - the nginx.conf is located here run sudo nano /etc/nginx/nginx.conf to edit it.
		/usr/share/nginx/html - source code here

SYSTEM VARIABLES:

USER=ubuntu
HOST=ec2-100-26-97-226.compute-1.amazonaws.com
TARGET_DIR=~aws-ec2-github-temp
PEM_PATH=$(wslpath "C:\\Users\\harry\\aws-ec2-01.pem")





ssh -i "/mnt/c/Users/harry/.ssh/aws-ec2-01.pem" ubuntu@ec2-100-26-97-226.compute-1.amazonaws.com

./connectToEC2.sh
ssh -i $PEM_PATH ${USER}@${HOST}

from wsl: (if doesn't work, select all lines in the cmd and execute 'join lines' from the
pycharm edit menu.

rsync -avz --delete -e "ssh -i /mnt/c/Users/harry/.ssh/aws-ec2-01.pem" --exclude 'node_modules' --exclude '.git' --exclude '.git' --exclude '.idea' --exclude '.env' /mnt/e/Projects/aws-ec2-github/ ubuntu@100.26.97.226:~/aws-ec2-github-temp/

sudo rm -rf /var/www/aws-ec2-github
sudo mkdir /var/www/aws-ec2-github
sudo chown -R ubuntu:ubuntu /var/www/aws-ec2-github
sudo mv ~/aws-ec2-github-temp/* /var/www/aws-ec2-github/
sudo rm -rf ~/aws-ec2-github-temp

cd /var/www/aws-ec2-github
npm install
cd client
npm install
npm run build

sudo cp -r /var/www/aws-ec2-github/client/build/* /usr/share/nginx/html/

sudo usermod -aG www-data ubuntu
sudo chown -R www-data:www-data /usr/share/nginx/html
sudo chmod 640 /var/www/aws-ec2-github/ecosystem.config.js
sudo chown www-data:www-data /var/www/aws-ec2-github/ecosystem.config.js
sudo chmod 750 /var/www/aws-ec2-github/

sudo systemctl start nginx
pm2 stop my-server
pm2 delete my-server
pm2 cleardump
cd /var/www/aws-ec2-github
pm2 start ./ecosystem.config.js --env production --only aws-ec2-github-production


# for reference - pm2 start /var/www/aws-ec2-github/server/index.js --name my-server

